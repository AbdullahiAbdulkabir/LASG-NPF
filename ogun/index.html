<!DOCTYPE html>
<html>
<head>
	<title>Ogun State Emergency Numbers</title>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta http-equiv="X-UA-Compatible" content="ie=edge" />
	<!-- <link rel="stylesheet" href="css/index.css"> -->
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
     <!-- <link rel="stylesheet" href="../css/index.css"> -->

</head>
<body>	
	 <!-- Header section -->
	 <nav class="nav-extended  grey darken-3 " style=" box-shadow:0px 0px !important; height:120px;">
        <div class="">  
            <div class="nav-wrapper" style="padding:0px 10px">
                <div >
                    <a href="#" class=" brand-logo" style="display: flex;">
                      <img src="../imgs/police.png" style="width:100px;height:50px;margin-top:10px;" alt="brand-logo">
                      <!-- <span style="">Ogun State Police Command Emergency Numbers</span> -->
                    </a>
                </div>
      
                <a href="#" data-target="mobile-demo" class=" sidenav-trigger"><i class="material-icons">menu</i></a>
                <ul id="nav-mobile " class="right hide-on-med-and-down ">
                  <li><a href="../index.html">Lagos state</a></li>
                  <li><a href="#">Ogun state</a></li>
                </ul>
            </div>
            <div class="nav-content  " style="padding:0px 10px">
              <br>
              <ul id="tabs-swipe-demo" class="tabs tabs-transparent hide-on-med-and-up">
                <li class="tab col s6"><a class="active" href="../index.html">Lagos</a></li>
				<li class="tab col s6"><a href="#">Ogun</a></li>
                <!-- <li class="tab col s6"><a href="#test-swipe-3">Ogun</a></li> -->
              </ul>
            </div>
        </div>
      </nav>
      <ul class="sidenav" id="mobile-demo">
          <li><a href="../index.php">Lagos</a></li>
          <li><a href="#">Ogun</a></li>
      </ul>
      
    <!-- Header section -->


	<div class="container  ">
				<div class="">
					<input type="text" class="form-control form-rounded" id="search" placeholder="search by name or area in Ogun">
				</div>
		
			
			<div id="content">
				
			</div>
			
			
		
	</div>
</body>
<!-- <script type="text/javascript" src="../js/index.js"></script> -->
 <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
 <script>
 	
 	let filtered;
 	let cont = document.querySelector('#content')
 	const search = document.querySelector('#search')
 	
 	fetch('https://emajency.com/js/ogunnpf.json')
	  .then((response) => {
	    return response.json();
	    // console.log(response)
	  })
 	 .then((data) => {
 	 	// let res = search.value
 	 	data.forEach((el,i)=>{
 	 		let head = Object.keys(el)
 	 		let h = document.createElement('h3')
		  		 h.textContent =head
 	 		el[head].forEach(e=>{
 	 		// console.log(h)

		 		let badge = document.createElement('div');
		 		// console.log(badge.append(h);
			//badge.innerHTML = '<div class="card text-center"><h5 class="">'+e.name+'<a href="tel:'+e.number+'" class="hvr-grow"><i class="fa fa-phone fa-4x call" aria-hidden="true"></i></a></div></h5><br>'
			badge.innerHTML	= `
				<ul class="collection col s12 m12" style="padding:0px 5px;">
					<div class="row">
						<div class="col s10">
							
							<p>
								${ e.name}
							</p>
						</div>
						<div class="col s2 right">
							<br>
							<a href="tel:${e.number}" class="secondary-content"><i class="material-icons blue-text text-darken-1">phone</i></i></a>
						</div>
					</div>
					
				</ul>
				`;
			  	cont.appendChild(badge)   
 	 		})
	  	
 	 	})
	// }
	search.addEventListener('input',function() {
		let ee= search.value.toUpperCase()
		filtered = data.filter((el,ep) => 
			el.name.includes(ee)
	    // console.log(Object.keys(el).includes(el))    	
			);
			if(search){cont.innerHTML = ''}
			for (var key in filtered) {	
 			let b = document.createElement('div');
			// b.innerHTML = '<div class="card text-center"><h5 class="">'+filtered[key].name+'<a href="tel:'+filtered[key].number+'" class="hvr-grow"><i class="fa fa-phone " aria-hidden="true"></i></a></div></h5><br>'
			b.innerHTML	= `
				<ul class="collection col s12 m12">
					<div class="row">
						<div class="col s10">
							
							<p>
								${ filtered[key].name}
							</p>
						</div>
						<div class="col s2 right">
							<br>
							<a href="tel:${filtered[key].number}" class="secondary-content"><i class="material-icons blue-text text-darken-1">phone</i></i></a>
						</div>
					</div>
					
				</ul>
				`;
  			cont.appendChild(b) 
			// console.log(filtered);
  			}

	})

  });

 </script>
</html>
